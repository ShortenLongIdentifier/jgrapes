var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var c=0;return $jscomp.iteratorPrototype(function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var c=a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var c,b=[];!(c=a.next()).done;)b.push(c.value);return b};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.findInternal=function(a,c,b){a instanceof String&&(a=String(a));for(var l=a.length,e=0;e<l;e++){var m=a[e];if(c.call(b,m,e,a))return{i:e,v:m}}return{i:-1,v:void 0}};$jscomp.polyfill=function(a,c,b,l){if(c){b=$jscomp.global;a=a.split(".");for(l=0;l<a.length-1;l++){var e=a[l];e in b||(b[e]={});b=b[e]}a=a[a.length-1];l=b[a];c=c(l);c!=l&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,b){var c=this;c instanceof String&&(c=String(c));var e=c.length;for(b=b||0;b<e;b++)if(c[b]==a||Object.is(c[b],a))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");
$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(a,b){var c=$jscomp.checkStringArgs(this,a,"endsWith");a+="";void 0===b&&(b=c.length);b=Math.max(0,Math.min(b|0,c.length));for(var e=a.length;0<e&&0<b;)if(c[--b]!=a[--e])return!1;return 0>=e}},"es6","es3");
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,b){var c=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var e=c.length,m=a.length;b=Math.max(0,Math.min(b|0,c.length));for(var n=0;n<m&&b<e;)if(c[b++]!=a[n++])return!1;return n>=m}},"es6","es3");var JGPortal={};
(function(){function a(a){a=$(".portlet[data-portlet-id='"+a+"']");if(1===a.length)return $(a[0])}function c(a){a=$("#tabs").tabs().find("> div[data-portlet-id='"+a+"']");if(1===a.length)return $(a[0])}function b(a){var d=$("#tabs").tabs(),b=void 0;d.find("> div").filter(function(d){return $(this).attr("data-portlet-id")===a?(b=d,!0):!1});b&&d.tabs("option","active",b)}function l(a,b,c){for(var d=0;d<a.length;d++){if(a[d]===b)return!0;if(a[d]===c)break}return!1}function e(d,k,g,u){var h=a(d);if(!h){h=
$('<div class="portlet"><div class="portlet-header"><span class="portlet-header-text"></span></div><div class="portlet-content"></div></div>');h.attr("data-portlet-id",d);h.addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all");var e=h.find(".portlet-header");e.addClass("ui-widget-header ui-corner-all");k.includes("DeleteablePreview")&&(e.prepend("<span class='ui-icon ui-icon-delete portlet-delete'></span>"),e.find(".portlet-delete").on("click",function(){var a=$(this).closest(".portlet").attr("data-portlet-id");
JGPortal.sendDeletePortlet(a)}));k.includes("View")&&(e.prepend("<span class='ui-icon ui-icon-fullscreen portlet-expand'></span>"),e.find(".portlet-expand").on("click",function(){var a=$(this).closest(".portlet").attr("data-portlet-id");c(a)?b(a):JGPortal.sendRenderPortlet(a,"View",!0)}));var f=!1;$(".column").each(function(a){if(a>=r.length)return!1;var b=r[a];if(l(b,d,d))return $(this).find(".portlet").each(function(a){a=$(this);var c=a.attr("data-portlet-id");if(!l(b,c,d))return a.before(h),f=
!0,!1}),f||$(this).append(h),f=!0,!1});f||$(".column").first().prepend(h);m()}k=$(g);h.find(".portlet-header-text").text(k.attr("data-portlet-title"));g=h.find(".portlet-content");g.children().detach();g.append(k);u&&$("#tabs").tabs("option","active",0)}function m(){if(v){var a=[];$(".overview-panel").find(".column").each(function(d){var b=[];a.push(b);$(this).find("div.portlet[data-portlet-id]").each(function(a){b.push($(this).attr("data-portlet-id"))})});var b=[],c=$("#tabs").tabs();c.find(".ui-tabs-nav .ui-tabs-tab").each(function(a){0<
a&&(a=$(this).attr("aria-controls"),a=c.find("#"+a).attr("data-portlet-id"),b.push(a))});JGPortal.sendLayout(a,b)}}function n(){for(;!(0===p.length||0<q);){var a=p.shift(),b=y[a.method];b?a.hasOwnProperty("params")?b.apply(null,[].concat($jscomp.arrayFromIterable(a.params))):b():w.error("No handler for invoked method "+a.method)}}var r=[[],[],[]],v=!1,t={},w={debug:function(a){console&&console.debug&&console.debug(a)},info:function(a){console&&console.info&&console.info(a)},warn:function(a){console&&
console.warn&&console.warn(a)},error:function(a){console&&console.error&&console.error(a)}};JGPortal.log=w;JGPortal.registerPortletMethod=function(a,b,c){var d=t[a];d||(d={},t[a]=d);d[b]=c};JGPortal.findPortletPreview=a;JGPortal.findPortletView=c;JGPortal.layoutChanged=m;var x=1,y={addPortletType:function(a,b,c,e,h){for(var d in c)h=c[d],0===$("head > link[href='"+h+"']").length&&$("head link[href$='/portal.css']:last").after("<link rel='stylesheet' href='"+h+"'>");for(var g in e)c=e[g],0===$("head > script[src='"+
c+"']").length&&(d=document.createElement("script"),d.src=c,JGPortal.lockMessageQueue(),d.addEventListener("load",function(){JGPortal.unlockMessageQueue()}),$("head").get()[0].appendChild(d));a=$('<li class="ui-menu-item"><div class="ui-menu-item-wrapper" data-portlet-type="'+a+'">'+b+"</div></li>");$("#addon-menu-list").append(a)},deletePortlet:function(b){var d=c(b);d&&(d=d.closest(".ui-tabs-panel").remove().attr("id"),$("#tabs").tabs().find("li[aria-controls='"+d+"']").remove(),$("#tabs").tabs().tabs("refresh"));
(b=a(b))&&b.remove();m()},invokePortletMethod:function(a,b,c,e){(a=t[a][c])&&a(b,e)},lastPortalLayout:function(a,b){r=a},portalConfigured:function(){v=!0;m();$("body").faLoading("remove")},reload:function(){window.location.reload(!0)},retrieveLocalData:function(a){var b=[];try{for(var c=0;c<localStorage.length;c++){var d=localStorage.key(c);if(!a.endsWith("/")){if(d!==a)continue}else if(!d.startsWith(a))continue;var e=localStorage.getItem(d);b.push([d,e])}}catch(z){}JGPortal.sendLocalData(b)},storeLocalData:function(a){try{for(var b in a){var c=
a[b];"u"===c[0]?localStorage.setItem(c[1],c[2]):"d"===c[0]&&localStorage.removeItem(c[1])}}catch(u){}},updatePortlet:function(a,k,g,f,h){if("Preview"===k||"DeleteablePreview"===k)e(a,g,f,h);else if("View"===k){g=c(a);f=$(f);if(g)g.children().detach(),g.append(f);else{k=$("#tabs").tabs();x+=1;g="tabs-"+x;var d=$("<li><a href='@{href}'>@{label}</a> <span class='ui-icon ui-icon-close' role='presentation'>Remove Tab</span></li>".replace(/@\{href\}/g,"#"+g).replace(/@\{label\}/g,f.attr("data-portlet-title")));
k.find(".ui-tabs-nav").append(d);g=$("<div id='"+g+"'></div>");g.append(f);g.attr("data-portlet-id",a);k.append(g);k.tabs("refresh");m()}h&&b(a)}}},p=[],q=0;JGPortal.lockMessageQueue=function(){q+=1};JGPortal.unlockMessageQueue=function(){--q;0==q&&n()};JGPortal.handleMessage=function(a){p.push(a);1===p.length&&n()};var f=$.simpleWebSocket({url:("https:"===window.location.protocol?"wss:":"ws")+"//"+window.location.host+window.location.pathname}).listen(JGPortal.handleMessage);f.connect();JGPortal.sendPortalReady=
function(){f.send({jsonrpc:"2.0",method:"portalReady"})};JGPortal.sendSetTheme=function(a){f.send({jsonrpc:"2.0",method:"setTheme",params:[a]})};JGPortal.sendSetLocale=function(a){f.send({jsonrpc:"2.0",method:"setLocale",params:[a]})};JGPortal.sendRenderPortlet=function(a,b,c){f.send({jsonrpc:"2.0",method:"renderPortlet",params:[a,b,c]})};JGPortal.sendAddPortlet=function(a){f.send({jsonrpc:"2.0",method:"addPortlet",params:[a,"Preview"]})};JGPortal.sendDeletePortlet=function(a){f.send({jsonrpc:"2.0",
method:"deletePortlet",params:[a]})};JGPortal.sendToPortlet=function(a,b,c){void 0===c?f.send({jsonrpc:"2.0",method:"sendToPortlet",params:[a,b]}):f.send({jsonrpc:"2.0",method:"sendToPortlet",params:[a,b,c]})};JGPortal.sendLayout=function(a,b){f.send({jsonrpc:"2.0",method:"portalLayout",params:[a,b]})};JGPortal.sendLocalData=function(a){f.send({jsonrpc:"2.0",method:"retrievedLocalData",params:[a]})}})();
(function(){JGPortal.tooltip=function(a){a.tooltip({items:"[data-tooltip-id], [title]",content:function(){var a=$(this);if(a.is("[data-tooltip-id]")){a=a.attr("data-tooltip-id");var b=$("#"+a);return b?(b=b.clone(!0),b.removeClass("jgrapes-tooltip-prototype"),b):"<#"+a+">"}if(a.is("[title]"))return a.attr("title")}})}})();
